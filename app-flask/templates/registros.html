<!DOCTYPE html>
<html>
<head>
  <title>Trabajo Final</title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" >
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <style>
      body{
        background: #d7dbdd;
      }
  </style>
</head>
<body>
<div class="container">

  <br>
  <h2 align="center">Consulta de Productos por su tipo</h2><br><br>
  <form  action="" method="post" role="form">
    {{ form.csrf }}
    <div class="form-group">
      <label for="primero">Ingrese el nombre o inicial del tipo de producto:</label>
      <input type="text" class="form-control" id="primero" name="primero" placeholder="Tipo...">
      <br>
    </div>
    <button type="submit" class="btn btn-success">Consultar</button>
  </form>

  <br>
  <hr/>
  <h2>Listado</h2>
  {% if data %}

  <h4>Número de coincidencias {{numero}}</h4>
  <div>
      <table class="table">
        <tr>
          <th>Titulo</th>
          <th>Tipo</th>
          <th>Precio</th>
          <th>Condición</th>
          <th>Ubicación</th>
        </tr>

        {% for d in data %}
        <tr>
          <td>{{d['titulo'].decode('utf-8')}}</td>
          <td>{{d['tipo'].decode('utf-8')}}</td>
          <td>{{d['precio']}}</td>
          <td>{{d['condicion'].decode('utf-8')}}</td>
          <td>{{d['ubicacion'].decode('utf-8')}}</td>
        </tr>

        {% endfor %}
      </table>
  </div>
  {% endif %}
  <div>
    <br>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}

        {% for message in messages %}
            {% if "Error" not in message[1]: %}
                <div class="alert alert-info">
                <strong>Success! </strong> {{ message[1] }}
                </div>
            {% endif %}

            {% if "Error" in message[1]: %}
                <div class="alert alert-warning">
                {{ message[1] }}
                </div>
            {% endif %}
        {% endfor %}
            {% endif %}
        {% endwith %}
  </div>
</div>
</body>
</html>
